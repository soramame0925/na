@charset "UTF-8";
/*
    Template: swell
    Theme Name: SWELL CHILD
*/

/* =====================================
 * Common utility classes
 * ===================================== */
.hidden {
  display: none !important;
}

.btn {
  display: inline-block;
  padding: 0.5rem 1rem;
  border-radius: 4px;
}

.text-center {
  text-align: center;
}

/* 投稿本文のモバイル最適化（記事ページ + ボトムシート両方に効く） */
.entry-content {
  font-size: 15.5px;
  line-height: 1.7;
  word-break: break-word;
  overflow-wrap: anywhere;
}

.entry-content img,
.entry-content iframe,
.entry-content video {
  max-width: 100%;
  height: auto;
  display: block;
}

.entry-content table {
  width: 100%;
  display: block;
  overflow-x: auto;
  font-size: 14px;
}

.entry-content h1 { font-size: 1.25rem; }
.entry-content h2 { font-size: 1.15rem; }
.entry-content h3 { font-size: 1.05rem; }



/* ========== Mobile-first baseline for post content ========== */

/* 1) 本文の読みやすさ（スマホ基準） */
.entry-content {
  max-width: 680px;
  margin-inline: auto;
  padding-inline: 12px;
  font-size: 15.5px;
  line-height: 1.75;
  word-break: break-word;
  overflow-wrap: anywhere;
  -webkit-text-size-adjust: 100%;
}

/* 段落・見出し・余白 */
.entry-content p { margin: 0 0 1em; }
.entry-content p:empty { display: none; }
.entry-content br + br { display: none; } /* 連続<br>の圧縮 */
.entry-content h1 { font-size: 1.25rem; margin: 1.1em 0 .6em; line-height: 1.35; }
.entry-content h2 { font-size: 1.15rem; margin: 1.05em 0 .55em; line-height: 1.35; }
.entry-content h3 { font-size: 1.05rem; margin: 1em 0 .5em;  line-height: 1.35; }

/* 2) 画像・動画・iframe：固定幅を無効化してフィットさせる */
.entry-content img,
.entry-content video,
.entry-content iframe {
  max-width: 100% !important;
  height: auto !important;
  display: block;
}

/* インラインstyleや属性で固定されてても上書きする（保険） */
.entry-content .wp-block-image img[style*="width"],
.entry-content .wp-block-image img[width],
.entry-content iframe[width],
.entry-content iframe[height] {
  width: 100% !important;
}

/* iframeは比率で可変に（動画・プレイヤー想定） */
.entry-content iframe {
  aspect-ratio: 16 / 9;
  border: 0;
}

/* 3) ギャラリー：スマホは2〜3列、PCで多段 */
.entry-content .wp-block-gallery { gap: 6px; }
.entry-content .wp-block-gallery .wp-block-image { margin: 0; }
@media (max-width: 480px) {
  .entry-content .wp-block-gallery .wp-block-image { width: calc((100% - 6px) / 2) !important; }
}
@media (min-width: 481px) and (max-width: 767px) {
  .entry-content .wp-block-gallery .wp-block-image { width: calc((100% - 12px) / 3) !important; }
}
/* デスクトップはcolumns指定があれば活かしつつ、幅が詰まらないように */
@media (min-width: 768px) {
  .entry-content .wp-block-gallery.columns-7 .wp-block-image { width: calc((100% - 6px * 6) / 7) !important; }
}

/* 4) テーブル：横スクロール許可で潰れ防止 */
.entry-content table {
  width: 100%;
  border-collapse: collapse;
  display: block;
  overflow-x: auto;
  font-size: 14px;
}
.entry-content th, .entry-content td { padding: .6em; white-space: normal; }

/* 5) Spacerブロック：スマホで過剰な縦空きにならないよう抑制 */
.entry-content .wp-block-spacer[style*="height"] {
  height: clamp(8px, 4vh, 32px) !important;
}

/* 6) ボタン：スマホは横幅いっぱい、PCで自然に収まる */
.entry-content .swell-block-button { width: 100%; }
@media (min-width: 768px) {
  .entry-content .swell-block-button { width: auto; display: inline-block; }
}

/* 7) 独自ブロック（棒グラフ/レーティング）：はみ出し防止 */
.entry-content .pb-bar-graph,
.entry-content .pb-rating-graph { overflow: hidden; }
.entry-content .pb-bar-graph__dl,
.entry-content .pb-rating-graph__item { max-width: 100%; }

/* 8) インラインfont-sizeの“18pxだらけ”対策（任意）
   インライン指定をそのまま使いつつ、モバイルで少し小さめに */
.entry-content .swl-fz { font-size: clamp(15px, 3.8vw, 18px) !important; }

/* ========== Desktop up: “PCで広げる” 上書き ========== */
@media (min-width: 768px) {
  .entry-content {
    max-width: 760px;   /* 好みで 760–840px */
    padding-inline: 16px;
    font-size: 16.5px;
    line-height: 1.8;
  }
}

/* Hide original SWELL title and style relocated title */
.single .p-articleHead.c-postTitle,
.single .p-articleHead .c-postTitle__ttl {
  display: none !important;
}

.sora-card-title-under {
  font-size: clamp(18px, 4.6vw, 22px);
  font-weight: 700;
  line-height: 1.45;
  margin: 16px 0 8px;
  letter-spacing: .02em;
  display: block;
  width: 100%;
  flex: 0 0 100%; /* fallback if still inside a flex container */
}

/* --- Force override for relocated H1 under gallery --- */
body.single .l-mainContent .post_content h1.sora-card-title-under {
  font-size: clamp(16px, 3.6vw, 20px) !important;
  line-height: 1.35 !important;
  font-weight: 700;
  letter-spacing: .02em;
  margin: 12px 0 8px !important;
  display: block;
  width: 100%;
  flex: 0 0 100%;
}

/* ギャラリー下のタイトルを小さめに調整 */
h1.sora-moved-title {
  font-size: 15px !important;   /* ← DLsiteの商品タイトルと同等サイズ */
  line-height: 1.6 !important;  /* 行間は読みやすく */
  font-weight: 600 !important;  /* 少しだけ太字でタイトル感を残す */
  margin: 10px 0 14px !important; /* 余白もDLsiteっぽく控えめ */
}

/* Hide SWELL's featured image block inside single posts */
.single .p-articleThumb {
  display: none !important;
}

/* (optional) if any spacing remains from wrappers */
.single .p-articleThumb + * {
  margin-top: 0;
}

:root{
  /* Half + a bit on phones, but clamp to a sane range */
  --drawer-w: clamp(300px, 52vw, 520px);
}

/* If you added earlier rules for .filter-drawer / .filter-overlay, keep them.
   Only the variable change is required because overlay uses (100vw - var(--drawer-w)). */

/* Optional: tiny phones use wider drawer; tablets a bit slimmer */
@media (max-width: 360px){
  :root{
    --drawer-w: 72vw;           /* more room on very narrow screens */
  }
}
@media (min-width: 768px){
  :root{
    --drawer-w: clamp(360px, 40vw, 560px); /* tablets/desktop */
  }
}

/* Layer container */
.filter-layer{
  position: fixed;
  inset: 0;
  pointer-events: none; /* child controls interaction */
  z-index: 2147483646;  /* one below the bottom nav */
}

/* Left-side dark overlay (clickable) */
.filter-overlay{
  position: fixed;
  top: 0;
  left: 0;
  width: calc(100vw - var(--drawer-w));
  height: 100vh;
  background: rgba(0,0,0,.55);
  opacity: 0;
  pointer-events: none;
  transition: opacity .2s ease;
}

/* Drawer on the right */
.filter-drawer{
  position: fixed;
  top: 0;
  right: 0;
  width: var(--drawer-w);
  max-width: 100vw;
  height: 100vh;
  background: #fff;
  box-shadow: -16px 0 32px rgba(0,0,0,.2);
  transform: translateX(100%);
  transition: transform .25s ease;
  pointer-events: auto;        /* can scroll/click inside */
  overflow: auto;
}

/* When open (toggle this on <body> or .filter-layer root) */
.filter-layer.is-open .filter-overlay{
  opacity: 1;
  pointer-events: auto;        /* overlay becomes clickable */
}
.filter-layer.is-open .filter-drawer{
  transform: translateX(0);
}

.filter-drawer {
  width: clamp(260px, 46vw, 420px) !important;
  max-width: 100% !important;
}

.filter-overlay {
  width: calc(100vw - clamp(260px, 46vw, 420px)) !important;
}
